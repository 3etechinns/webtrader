define(["jquery"],function(a){"use strict";function b(){a(this).find(".chartSubContainer").width(a(this).width()-30),a(this).find(".chartSubContainer").height(a(this).height()-10);var b="#"+a(this).find(".chartSubContainer").attr("id");require(["charts/charts"],function(a){a.triggerReflow(b)})}var c=0;return{addNewWindow:function(d,e,f,g,h){var i="chart-dialog-"+ ++c;a.get("charts/chartWindow.html",function(c){c=a(c),c.attr("id",i).dialog({autoOpen:!1,resizable:!0,minWidth:350,minHeight:400,width:350,height:400,my:"center",at:"center",of:window,title:e+" ("+f+")",close:function(){var b="#"+i+"_chart",c=a(b).data("timeperiod"),d=a(b).data("instrumentCode");a(this).dialog("destroy"),require(["charts/charts"],function(a){a.destroy("#"+i+"_chart",c,d)})},resize:function(){b.call(this)}}).find("div.chartSubContainerHeader").attr("id",i+"_header").end().find("div.chartSubContainer").attr("id",i+"_chart").end(),require(["charts/chartOptions"],function(a){a.init(i,f,h)}),a("#"+i).dialog("open"),b.call(a("#"+i)),require(["charts/charts"],function(a){a.drawChart("#"+i+"_chart",d,e,f,h)}),g&&g(a("#"+i))})},totalWindows:function(){return a("div.chart-dialog").length},triggerResizeEffects:function(a){b.call(a)}}});