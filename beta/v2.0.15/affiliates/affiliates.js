define(["jquery","websockets/binary_websockets","navigation/menu","common/util"],function(a){return{init:function(){require(["text!charts/chartWindow.html"],function(b){var c="webtrader-dialog-1",d=getParameterByName("timePeriod")||"1d",e="1t"==d?"line":"candlestick",f=a(b);f.attr("id",c).find("div.chartSubContainerHeader").attr("id",c+"_header").end().find("div.chartSubContainer").attr("id",c+"_chart").end(),require(["charts/chartOptions"],function(a){a.init(c,d,e)}),require(["instruments/instruments","jquery-growl"],function(b){b.init().then(function(b){if(!a.isEmptyObject(b)){var g=getParameterByName("instrument"),h=getObjects(b,"symbol",g);if(h&&h.length>0&&h[0].symbol&&h[0].display_name)if(validateParameters()){var g=h[0].symbol,i=h[0].display_name,j=h[0].delay_amount||0,k=(getParameterByName("startTime"),getParameterByName("endTime")),l=getParameterByName("entrySpotTime"),m=getParameterByName("barrierPrice");k&&l&&m?j>0?a.growl.error({message:"Delayed instruments cannot be rendered!"}):"1T"!==d.toUpperCase()?a.growl.error({message:"Only tick charts are supported in this route!"}):require(["charts/charts"],function(a){a.drawChart("#"+c+"_chart",{instrumentCode:g,instrumentName:i,timePeriod:d,type:e,delayAmount:j})}):require(["charts/charts"],function(a){a.drawChart("#"+c+"_chart",{instrumentCode:g,instrumentName:i,timePeriod:d,type:e,delayAmount:j})})}else require(["jquery","jquery-growl"],function(a){a.growl.error({message:"Invalid parameter(s)!"})}),f.find("div.chartSubContainerHeader").hide();else require(["jquery","jquery-growl"],function(a){a.growl.error({message:"Instrument Code Unknown/Unavailable!"})}),f.find("div.chartSubContainerHeader").hide()}})["catch"](function(){require(["jquery","jquery-growl"],function(a){a.growl.error({message:"Error getting market information!"})}),f.find("div.chartSubContainerHeader").hide()})}),a(".mainContainer").append(f),resizeElement("#"+c),resizeElement("#"+c+" .chartSubContainer"),a(window).resize(function(){resizeElement("#"+c),resizeElement("#"+c+" .chartSubContainer")})})}}});