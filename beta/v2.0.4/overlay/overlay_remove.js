define(["jquery","datatables"],function(a){function b(b,d){require(["text!overlay/overlay_remove.html"],function(e){e=a(e),e.hide(),e.appendTo("body"),c=e.find("table").DataTable({paging:!1,scrollY:200,info:!1}),a(".overlay_dialog_remove").dialog({autoOpen:!1,resizable:!1,width:330,modal:!0,my:"center",at:"center",of:window,buttons:[{text:"Remove Selected",click:function(){require(["currentPriceIndicator"],function(b){var d=a(".overlay_dialog_remove").data("refererChartID");c.rows(".selected").nodes().to$().each(function(){var c=a(this).data("id"),e=a(d).highcharts();if(e&&c){var f=e.get(c);f&&(a.each(b.getCurrentPriceOptions(),function(a,b){return b&&f.options&&f.options.id&&b.parentSeriesID==f.options.id?(f.removeCurrentPrice(a),!1):void 0}),f.remove())}}),a(".overlay_dialog_remove").dialog("close")})}},{text:"Cancel",click:function(){a(".overlay_dialog_remove").dialog("close")}}]}),"function"==typeof d&&d(b)})}var c=void 0;return{openDialog:function(d){if(0==a(".overlay_dialog_remove").length)return void b(d,this.openDialog);c.clear().draw();var e=a(d).highcharts();e&&(a.each(e.series,function(b,d){a(this).data("isInstrument")&&b>0&&a(c.row.add([d.options.name]).draw().node()).click(function(){a(this).toggleClass("selected")}).data({id:d.options.id})}),a(".overlay_dialog_remove").data("refererChartID",d).dialog("open"))}}});