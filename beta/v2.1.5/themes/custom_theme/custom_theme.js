define(["jquery","windows/windows","highstock","color-picker"],function(a,b){function c(a,b){var c=[];return c[0]=parseInt(a.substring(0,2),16),c[1]=parseInt(a.substring(2,4),16),c[2]=parseInt(a.substring(4,6),16),c[3]=b?parseFloat(b):1,"rgba("+c.join(", ")+")"}function d(b,c){if(c){c=c.substring(0,c.indexOf(")")+1);var d="",e="";b.split("_").forEach(function(a,b,f){return e+="}",b===f.length-1?void(d=d+'{"'+a+'":"'+c+'"'):void(d=d+'{"'+a+'":')}),d+=e,a.extend(m,JSON.parse(d))}}function e(e){e.click(function(){l?l.moveToTop():require(["text!themes/custom_theme/custom_theme.html","css!themes/custom_theme/custom_theme.css"],function(e){e=a(e),e.find(".color_input_width").each(function(b,e){var g=a(e).attr("id").replace("theme_",""),h=a(e).attr("alpha"),j=f(g);if(j)a(e).css({background:j});else{var k=a(e).css("background");d(g,k),Highcharts.setOptions(m)}a(e).colorpicker({part:{map:{size:128},bar:{size:128}},select:function(b,f){a(e).css({background:"#"+f.formatted}).val(""),d(g,c(f.formatted,h)),i()},ok:function(b,f){a(e).css({background:"#"+f.formatted}).val(""),d(g,c(f.formatted,h)),i()},cancel:function(){d(g,a(e).css("background")),i()}})}),l=b.createBlankWindow(e,{autoOpen:!1,resizable:!1,collapsable:!1,minimizable:!1,maximizable:!1,closable:!1,closeOnEscape:!1,width:650,height:515,title:"Customize chart appearance",modal:!0,destroy:function(){l=null},buttons:{Apply:function(){require(["themes/themes"],function(b){var c=a("a.theme_custom"),d=c.text(),e=c.attr("class");b.confirmationDialog(Highcharts.getOptions(),e,d)})},Cancel:function(){a(this).dialog("close"),a(this).dialog("destroy"),g()}}}),l.dialog("open"),h()})})}function f(a){var b=k;return a.split("_").forEach(function(a){b&&(b=b[a])}),b}function g(){var a=Highcharts.getOptions();for(var b in a)"function"!=typeof a[b]&&delete a[b];Highcharts.setOptions(k)}function h(){var b={chart:{spacingLeft:0,marginLeft:45,events:{load:function(){this.credits.element.onclick=function(){window.open("http://www.binary.com","_blank")}}}},series:[{type:"candlestick",data:j}],navigator:{enabled:!0,series:{id:"navigator"}},plotOptions:{candlestick:{lineColor:"black",color:"red",upColor:"green",upLineColor:"black",shadow:!0}},title:{text:"Some random index"},credits:{href:"http://www.binary.com",text:"Binary.com"},xAxis:{ordinal:!1},yAxis:[{opposite:!1}],rangeSelector:{enabled:!1},tooltip:{crosshairs:[{width:2,color:"red",dashStyle:"dash"},{width:2,color:"red",dashStyle:"dash"}],enabled:!0,enabledIndicators:!0},exporting:{enabled:!1}};a("#preview-chart").highcharts("StockChart",b)}function i(){Highcharts.setOptions(m),a("#preview-chart").highcharts().destroy(),h()}var j=[[1452412800,32.87,33.75,32.5,33.28],[1452427200,33.27,34.45,32.81,34.22],[1452441600,34.23,34.73,33.72,33.77],[1452456e3,34.23,34.48,33.73,33.84],[1452470400,33.84,34.42,33.2,33.33],[1452484800,33.34,33.73,32.8,33.55],[1452499200,32.7,33.22,32.56,32.91],[1452513600,32.89,33.38,32.05,32.17],[1452528e3,32.16,32.2,31.21,31.54],[1452542400,30.8,31.87,30.76,31.65],[1452556800,31.66,32.37,30.88,31.09],[1452571200,31.1,31.27,30.38,30.84],[1452585600,31.52,31.84,31.23,31.48]],k=a.extend(!0,{},Highcharts.getOptions(),{}),l=null,m={};return{init:e}});