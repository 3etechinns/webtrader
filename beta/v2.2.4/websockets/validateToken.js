define(["exports","websockets/binary_websockets","common/util"],function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=function(a){return new Promise(function(c,d){var e=local_storage.get("config"),f=(local_storage.get("i18n")||{value:"en"}).value,g=(e&&e.websocket_url||"wss://ws.binaryws.com/websockets/v3?l="+f)+"&app_id="+b.app_id,h=new WebSocket(g);h.addEventListener("open",function(){h.send(JSON.stringify({authorize:a}))}),h.addEventListener("close",function(){}),h.addEventListener("message",function(a){var b=JSON.parse(a.data);c(b.authorize),h.close()}),h.addEventListener("error",function(a){return d(a.error)})})}});