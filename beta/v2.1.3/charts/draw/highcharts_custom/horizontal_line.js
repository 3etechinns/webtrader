define(["highstock","common/util"],function(){var a={};return{init:function(b){!function(c,d){function e(b,c){var d="horizontalLine_"+(new Date).getTime(),e=c.addPlotLine({value:b,width:2,color:"green",id:d}).svgElem.css({cursor:"pointer"}).attr("id",d).translate(0,0).on("mousedown",f).on("dblclick",g);return a[d]=e,e}function f(){i.annotate=!0;var f=d(this).attr("id"),g=a[f],j=!1;c.wrap(c.Pointer.prototype,"drag",function(a,f){if(i.annotate){if(j||(j=!0,d(b).one("mouseup",function(){i.annotate=!1,j=!1,c.removeEvent(i,"mousemove")})),i.isInsidePlot(f.chartX-i.plotLeft,f.chartY-i.plotTop)&&g.element){h(g.element.id);var k=i.yAxis[0].toValue(f.chartY),l=i.yAxis[0];g=e(k,l)}}else a.call(this,f)})}function g(){var a=d(this).attr("id");h(a)}function h(b){d("#"+b).off(),delete a[b],i.yAxis[0].removePlotLine(b)}if(c){var i=d(b).highcharts();c.addEvent(i,"click",function(a){i.annotate&&(i.annotate=!1,e(a.yAxis[0].value,a.yAxis[0].axis),c.removeEvent(i,"click"))})}}(Highcharts,jQuery)}}});