define(["jquery","css!navigation/navigation.css"],function(a){"use strict";function b(b){var c=a("#nav-menu"),d=a("#mobile-nav"),e=a("#nav-toggle"),f="nav-normal-menu",g="nav-mobile-menu";b.matches?d.is(":visible")||e.removeClass("nav-toggle-active"):(c.hasClass(g)&&c.removeClass(g).addClass(f),c.parents("#mobile-nav").length&&c.unwrap(),c.find("li > ul").each(function(){a(this).removeAttr("style")}))}function c(){var b=a("#nav-menu"),c="nav-normal-menu",e="nav-mobile-menu";b.hasClass(c)?(b.removeClass(c).addClass(e),b.wrap("<div id='mobile-nav'></div>"),a("#mobile-nav").animate({left:"+=280"},320)):b.hasClass(e)&&a("#mobile-nav").animate({left:"-=280"},320,function(){b.removeClass(e).addClass(c),b.unwrap()}),d()}function d(){a("#nav-menu li > ul li").each(function(){a(this).off("click"),a(this).on("click",function(){var b="nav-normal-menu",d="nav-mobile-menu",e=a(this),f=e.parents("#nav-menu"),g=e.find("ul").length>0;f.hasClass(b)?g||e.parent("ul").not("#nav-menu").toggleClass("nav-closed"):f.hasClass(d)&&(g||a("#mobile-nav").animate({left:"-=280"},320,function(){a("#nav-toggle").removeClass("nav-toggle-active"),c()}))})}),a("#nav-menu.nav-normal-menu li").each(function(){a(this).off("mouseover"),a(this).on("mouseover",function(){a(this).find("ul.nav-closed").each(function(){a(this).removeClass("nav-closed")})})})}function e(){a("#nav-menu a.nav-dropdown-toggle").each(function(){var b=a(this);b.off("click"),b.on("click",function(c){var d=b.parent(),e=d.parent(),f="nav-menu"===e.attr("id"),g="nav-mobile-menu",h="submenu-expanded",i=b.parents("#nav-menu").hasClass(g);if(i){var j=b.next("ul");j.length>0&&(f&&a("#nav-menu.nav-mobile-menu li").each(function(){a(this).removeClass("active")}),a("#nav-menu li > ul").each(f?function(){a(this).slideUp()}:function(){var b=a(this);b.hasClass(h)||b.slideUp(),e.find("li > ul").each(function(){a(this).is(j)||a(this).slideUp()})}),f&&d.toggleClass("nav-toggle-active"),j.is(":visible")?(j.slideUp(),j.removeClass(h)):(j.slideDown(),j.addClass(h)))}c.preventDefault()})}),d()}return a(window).resize(function(){if(matchMedia){var a=window.matchMedia("(max-width: 699px)");a.addListener(b),b(a)}else{window.innerWidth>0?window.innerWidth:screen.width}}),{init:function(b){require(["text!navigation/navigation.html"],function(d){a("body").prepend(d),a("#nav-toggle").on("click",function(b){a("#nav-toggle").toggleClass("nav-toggle-active"),c(),b.preventDefault()}),e(),b&&b(a("#nav-menu"))})},updateDropdownToggles:function(){e()},updateListItemToggles:function(){d()}}});