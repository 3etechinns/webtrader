define(["jquery","websockets/binary_websockets","navigation/menu","common/util","highstock"],function(a){Highcharts.setOptions({plotOptions:{candlestick:{lineColor:"rgba(0,0,0,1)",color:"rgba(215,24,24,1)",upColor:"rgba(2,146,14,1)",upLineColor:"rgba(0,0,0,1)"}}});var b=function(a,b,c,d){var e=a.attr("id");require(["charts/chartOptions","charts/tableView"],function(f,g){var h=g.init(a);f.init(e,b,c,h.show,d)})};return{init:function(){require(["text!charts/chartWindow.html"],function(c){var d="webtrader-dialog-1",e=getParameterByName("timePeriod")||"1d",f="1t"==e?"line":"candlestick",g=a(c);g.attr("id",d).find("div.chartSubContainerHeader").attr("id",d+"_header").end().find("div.chartSubContainer").attr("id",d+"_chart").end(),require(["instruments/instruments","jquery-growl"],function(c){c.init().then(function(c){if(!a.isEmptyObject(c)){var h=getParameterByName("instrument"),i=getObjects(c,"symbol",h);if(i&&i.length>0&&i[0].symbol&&i[0].display_name)if(validateParameters()){var h=i[0].symbol,j=i[0].display_name,k=i[0].delay_amount||0,l=(getParameterByName("startTime"),getParameterByName("endTime")),m=getParameterByName("entrySpotTime"),n=getParameterByName("barrierPrice");l&&m&&n?k>0?a.growl.error({message:"Delayed instruments cannot be rendered!"}):"1T"!==e.toUpperCase()?a.growl.error({message:"Only tick charts are supported in this route!"}):require(["charts/charts"],function(a){a.drawChart("#"+d+"_chart",{instrumentCode:h,instrumentName:j,timePeriod:e,type:f,delayAmount:k}),b(g,e,f,j)}):require(["charts/charts"],function(a){a.drawChart("#"+d+"_chart",{instrumentCode:h,instrumentName:j,timePeriod:e,type:f,delayAmount:k}),b(g,e,f,j)})}else require(["jquery","jquery-growl"],function(a){a.growl.error({message:"Invalid parameter(s)!"})}),g.find("div.chartSubContainerHeader").hide();else require(["jquery","jquery-growl"],function(a){a.growl.error({message:"Instrument Code Unknown/Unavailable!"})}),g.find("div.chartSubContainerHeader").hide()}})["catch"](function(){require(["jquery","jquery-growl"],function(a){a.growl.error({message:"Error getting market information!"})}),g.find("div.chartSubContainerHeader").hide()})}),a(".mainContainer").append(g),resizeElement("#"+d),resizeElement("#"+d+" .chartSubContainer"),a(window).resize(function(){resizeElement("#"+d),resizeElement("#"+d+" .chartSubContainer")})})}}});